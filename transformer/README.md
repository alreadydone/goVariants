# Go-Variants-Transformer

Tool for transforming [SGF format](http://www.red-bean.com/sgf/index.html) game records or game commentaries, for a Go variant, into SGF that works in SGF viewers for standard Go.

## Online samples

-   [viewer & editor](https://goplayerjuggler.github.io/goVariants/tGoEditor.html) (the source code is [here](https://github.com/goplayerjuggler/goVariants/tree/master/docs/tGoEditor.html)). 
-   [blog post (2017-12-22) with a real commented game](http://goplayerjuggler.blogspot.com/2017/12/a-big-fight-in-t-go-game-same-game-but.html)
    This blog post was made by adapting the files [viewerLocal.html](https://github.com/goplayerjuggler/goVariants/tree/master/transformer/samples/viewerLocal.html) and [blogTemplate.html](https://github.com/goplayerjuggler/goVariants/tree/master/transformer/samples/blogTemplate.html).

## Usage - simple scenario for HTML / Javascript developers

This section just assumes basic knowledge of HTML and javascript.

In order to review a t-Go game, this module provides a minified javascript file [dist/transformer.min.js](https://github.com/goplayerjuggler/goVariants/tree/master/transformer/dist/transformer.min.js). This file is a minified, javascript version of the file [src/transformer.js](https://github.com/goplayerjuggler/goVariants/tree/master/transformer/src/transformer.js). If `transformer.min.js` is referenced by an HTML page, it creates a global function `go_variants_transformer` which can be used to transform SGF as described in the previous section. It can (fairly easily) combined with a javascript library for viewing Go games like [WGo.js](https://github.com/waltheri/wgo.js) or [GoProject](https://github.com/IlyaKirillov/GoProject) in order to play through a t-Go game in a browser like Firefox.

A simple sample, to be run locally, is [here](https://goplayerjuggler.github.io/goVariants/tree/master/transformer/samples/viewerLocal.html. 

See the API section for details or better yet, the code here on github. 

## Usage for node developers

This section is for those who are familiar or are getting familiar with node.js and related tools. As this module is built using node.js, working on a system with a recent version of node / npm is probably necessary.

### Installing Go-Variants-Transformer

Copy or clone (via git) the source files for Go-Variants. 
Then, from within the `transfomer` local sub-folder:

```shell
$ npm install
```

If you `yarn`, you can use it instead of `npm`.

```shell
$ yarn install
```

Check the installation worked by running the unit tests (assuming `gulp` is installed globally):

```shell
$ gulp test
```

### Installation in a different project

First install `Go-Variants-Transformer` as described in the previous section. Then add it to your project's dependencies in `package.json`:

With npm:

```shell
$ npm install --save file:path/to/Go-Variants-Transformer
```

With yarn:

```shell
$ yarn add file:path/to/Go-Variants-Transformer --save 
```

### Standalone usage

A simple way to convert an SGF (t-Go) file is to run `/samples/transformOneFile.js`. Just open a command line in the `samples` folder and run the following command.

```shell
$ node transformOneFile path_to_input_sgf path_to_output_sgf 
```

## Licence
[0BSD (BSD Zero Clause License)](https://spdx.org/licenses/0BSD.html)

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [inverseTransform](#inversetransform)
-   [options](#options)
-   [transform](#transform)
-   [transformer](#transformer)

### inverseTransform

[transformer/src/transformer.js:272-426](https://github.com/goplayerjuggler/goVariants/blob/73331b376405d019fb4f08fc0766b9a0b6890c42/transformer/src/transformer.js#L272-L426 "Source code on GitHub")

Apart from a few details, this is an inverse of the transform function.

**Parameters**

-   `wrappedGame` **(smartgame | [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String))** 
-   `smartgame` **smartgame** 

### options

[transformer/src/transformer.js:74-74](https://github.com/goplayerjuggler/goVariants/blob/73331b376405d019fb4f08fc0766b9a0b6890c42/transformer/src/transformer.js#L74-L74 "Source code on GitHub")

### transform

[transformer/src/transformer.js:438-643](https://github.com/goplayerjuggler/goVariants/blob/73331b376405d019fb4f08fc0766b9a0b6890c42/transformer/src/transformer.js#L438-L643 "Source code on GitHub")

Main function; converts SGF for a Go variant (so far, just toroidal Go or t-Go).

**Parameters**

-   `tSgf` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `tGo` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Engine for counting liberties in t-Go. An instance of go-variants-engine.
-   `smartgame` **any** 
-   `smartgamer` **any** 

Returns **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object))** SGF that can be viewed in a standard SGF viewer. (See `options.transformToString` for the data type of the value returned.)

### transformer

[transformer/src/transformer.js:20-647](https://github.com/goplayerjuggler/goVariants/blob/73331b376405d019fb4f08fc0766b9a0b6890c42/transformer/src/transformer.js#L20-L647 "Source code on GitHub")

**Parameters**

-   `options` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Defines various options for the output SGF. May be omitted, in which case the default options (see below) are used.
    -   `options.addComments` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When flagged, comments are added to each node giving the move number and the number of stones captured by Black and White. (optional, default `true`)
    -   `options.wraparoundMarkersType` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** 0: no symbols are added to indicate the part of the wraparound area that’s next to the main grid;
        1: symbols are added using unicode symbols (from “Box Drawings”);
        2: symbols show t-Go coordinates. (optional, default `2`)
    -   `options.addPasses` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When flagged, a pass is added to each node corresponding to a move by a player. This can make the output more easy to navigate in some viewers. (optional, default `true`)
    -   `options.boardDimensions` **[array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** May be used for rectangular t-Go. Should be ommitted for [n, n] t-Go, where n is specified in the input SGF (@param variantSgf). (optional, default `[11,11]`)
    -   `options.projectionSettings` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Further optional settings for how the (toroidal, or other sort of) board is projected to a flat grid.
        -   `options.projectionSettings.wraparound` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Number of lines to add for the “wraparound”. (optional, default `4`)
        -   `options.projectionSettings.offset` **[array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** Translation to apply to all moves. (optional, default `[0,0]`)
    -   `options.transformToString` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When set to false, the output is an object (an instance of a Smartgame). (optional, default `true`)
-   `variantSgf` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** SGF for a game.
