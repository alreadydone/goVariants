# Go-Variants-Transformer

Tool for transforming [SGF format](http://www.red-bean.com/sgf/index.html) game records or game commentaries, for a Go variant, into SGF that works in SGF viewers for standard Go.

## Online samples

* [viewer](http://goplayerjuggler.blogspot.com/2017/12/t-go-viewer-2-improved-version-that.html)
* [blog post (2017-12-22) with a real commented game](http://goplayerjuggler.blogspot.com/2017/12/a-big-fight-in-t-go-game-same-game-but.html)

These blog posts were made by adapting the files `viewer.html` and `blogTemplate.html` in the folder `/samples`.

## Usage - simple scenario for reviewing a t-Go game

This section just assumes basic knowledge of HTML and javascript.

In order to review a t-Go game, this module provides a minified javascript file `transform.min.js` in the folder `dist`. This file is a minified, javascript version of the file `src/transform.js`. If `transform.min.js` is referenced by an HTML page, it creates a global function `goVariantsTransform` which transforms SGF as described in the previous section. This function can be (fairly easily) combined with a javascript library for viewing Go games like [WGo.js](https://github.com/waltheri/wgo.js) or [GoProject](https://github.com/IlyaKirillov/GoProject) in order to play through a t-Go game in a browser like Firefox.

A working sample is provided in `/samples/viewer.html`.

See the API section for details on options for calls to the `transform` function. 

## Usage for node developers

This section is for those who are familiar or are getting familiar with node.js and related tools. As this module is built using node.js, working on a system with a recent version of node / npm is probably necessary.

### Installing Go-Variants-Transformer

Copy or clone (via git) the source files for Go-Variants. 
Then, from within the local install folder:

```shell
$ npm install
```

If you have installed yarn, you can use it instead of npm.

```shell
$ yarn install
```

Check the installation worked by running the unit tests:

```shell
$ gulp test
```
### Installation in a different project

First install `Go-Variants-Transformer` as described in the previous section. Then add it to your project's dependencies in `package.json`:

With npm:
```shell
$ npm install --save file:path/to/Go-Variants-Transformer
```

With yarn:
```shell
$ yarn add file:path/to/Go-Variants-Transformer --save 
```

### Standalone usage
A simple way to convert an SGF (t-Go) file is to run `/samples/transformOneFile.js`. Just open a command line in the `samples` folder and run the following command.

```shell
$ node transformOneFile path_to_input_sgf path_to_output_sgf 
```
 
## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [transform](#transform)

### transform

**Parameters**

-   `variantSgf` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** SGF for a game.
-   `options` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Defines various options for the output SGF. May be ommitted, in which case the default options (see below) are used.
    -   `options.addComments` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When flagged, comments are added to each node giving the move number and the number of stones captured by Black and White. (optional, default `true`)
    -   `options.addMarkersForWraparound` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When flagged, the start of the “wraparound” area is shown in the viewer. This is done by adding labels at the edge of the wraparound, to each node in the game. (optional, default `true`)
    -   `options.addPasses` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When flagged, a pass is added to each node corresponding to a move by a player. This can make the output more easy to navigate in some viewers. (optional, default `true`)
    -   `options.boardDimensions` **[array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** . May be used for rectangular t-Go. Should be ommitted for [n, n] t-Go, where n is specified in the input SGF (@param variantSgf). (optional, default `[11,11]`)
    -   `options.projectionSettings` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Further optional settings for how the (toroidal, or other sort of) board is projected to a flat grid.
        -   `options.projectionSettings.wraparound` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Number of lines to add for the “wraparound”. (optional, default `4`)
        -   `options.projectionSettings.offset` **[array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** Translation to apply to all moves. (optional, default `[0,0]`)
    -   `options.transformToString` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When set to false, the output is an object (an instance of a Smartgame). (optional, default `true`)

Returns **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object))** SGF that can be viewed in a standard SGF viewer. (If `options.transformToString` is set to false, the SGF is returned as an object instead.)
